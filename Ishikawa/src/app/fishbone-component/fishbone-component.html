<!-- Header -->
<header class="app-header">
  <div class="logo-section">
    <img src="assets/logo.png" alt="Fishbone Creator Logo" class="app-logo">
    <span class="app-title">Fishbone Creator</span>
  </div>
  <div class="banner-section">
    <span class="banner-text">Visualize & Organize Your Ideas</span>
  </div>
</header>
<div class="main-container">
  <!-- Left panel: tiles -->
  <div class="left-panel">
    <div class="tile add-tile" (click)="createNewDiagram()">+ New Diagram</div>
    <h3 class="diagram-title">Available diagrams</h3>
    <div class="diagram-filter-buttons">
      <button mat-button class="diagram-filter-btn"  (click)="showMyDiagrams()" [class.active]="filterMode === 'mine'"  [disabled]="filterMode === 'mine'">
        Mine
      </button>
      <button mat-button class="diagram-filter-btn"  (click)="showAllDiagrams()" [class.active]="filterMode === 'all'" [disabled]="filterMode === 'all'">
        All
      </button>
    </div>
    <div class="diagram-grid">
      <div class="diagram-tile" *ngFor="let d of displayedDiagrams" (click)="loadSelectedDiagram(d)"
        [class.selected]="d.id === selectedDiagramId">
        <div class="diagram-tile-text">{{ d.name }}</div>
        <button class="delete-btn" (click)="deleteDiagram(d, $event)" title="Delete diagram"><mat-icon class="material-symbols-outlined"
            style="color: black">delete</mat-icon></button>
      </div>
    </div>
  </div>

  <!-- Right panel: diagram -->
  <div class="right-panel">
    <!-- Toolbar -->

    @if(!isEditing){
    <div class="empty-state">
      <mat-card class="empty-card">
        <mat-card-content>
          Please create a new fishbone or select an existing fishbone from the left pane.
        </mat-card-content>
      </mat-card>
    </div>
    }
    @else{
    <div class="toolbar">

      <!-- Input + buttons styled like tiles -->
      <div class="input-row">
        <input type="text" [(ngModel)]="newDiagramName" placeholder="Enter diagram name" class="diagram-input" />

        <button class="diagram-button save-btn" (click)="saveOrUpdateDiagram()">Save</button>
      </div>
    </div>
    }
    <!-- Diagram container -->
    <div #diagramDiv class="diagram-full" [class.hidden]="!isEditing"></div>
  </div>
</div>